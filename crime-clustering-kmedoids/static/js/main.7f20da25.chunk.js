(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{100:function(e,t,a){},182:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(6),l=a.n(c),s=(a(96),a(88)),i=a(90),o=a(29),u=a.n(o),d=a(89),m=a(60),p=a(38),h=a(39),f=a(41),v=a(40),b=a(42),y=(a(100),a(61)),g=a(44),C=(a(173),Object(g.b)(g.c)),w=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(f.a)(this,Object(v.a)(t).call(this,e))).state={},a}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.useRange,a=e.min,n=e.max;return l.a.createPortal(r.a.createElement("div",{className:"slider__layout"},t?r.a.createElement(g.a,null):r.a.createElement(C,{min:a,max:n,onChange:this.props.onUpdate})),document.getElementById("slider"))}}]),t}(r.a.Component),E=a(62),k=(a(180),["red","blue","green","purple","#000000","#CC0066","#339999","#99CCFF","#CCCCCC","yellow","orange"]),T={},j=10,S=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(f.a)(this,Object(v.a)(t).call(this,e))).fetchResult=Object(m.a)(u.a.mark(function e(){var t,n,r,c,l,s,i,o,m,p,h,f,v,b;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/category_map.json");case 2:return t=e.sent,e.next=5,t.json();case 5:return a.cMap=e.sent,e.next=8,fetch("/result-plot.json");case 8:return t=e.sent,e.next=11,t.json();case 11:for(n=e.sent,r={},c=!0,l=!1,s=void 0,e.prev=16,i=n[Symbol.iterator]();!(c=(o=i.next()).done);c=!0)m=o.value,p=Object(d.a)(m,2),h=p[0],f=p[1],r[f]=h;e.next=24;break;case 20:e.prev=20,e.t0=e.catch(16),l=!0,s=e.t0;case 24:e.prev=24,e.prev=25,c||null==i.return||i.return();case 27:if(e.prev=27,!l){e.next=30;break}throw s;case 30:return e.finish(27);case 31:return e.finish(24);case 32:return j=10,a.setState({checkedType:new Array(6).fill(!0)}),e.next=36,fetch("/result-data.json");case 36:return t=e.sent,e.next=39,t.json();case 39:for(v in a.dataSource=e.sent,a.dataSource)b=a.dataSource[v].Category,a.dataSource[v].Category=a.cMap[r[b]].category;case 41:case"end":return e.stop()}},e,this,[[16,20,24,32],[25,,27,31]])})),a.fetchCrimeData=Object(m.a)(u.a.mark(function e(){var t;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/crime_robbery_2017.json");case 2:return t=e.sent,e.next=5,t.json();case 5:a.dataSource=e.sent;case 6:case"end":return e.stop()}},e,this)})),a.init=function(){a.setState({timeInterval:"Hour",sliderMinValue:0,sliderMaxValue:23});var e=a.state,t=e.checkedType,n=e.currentLabel;a._data=a.dataSource.map(function(e){var t=e.Category,a=e.Time,n=e.X,r=e.Y,c=Object(i.a)(e,["Category","Time","X","Y"]),l=parseInt(c.class,10);return{hour:parseInt(a.slice(0,2),10),label:t,cluster:l,center:{lat:parseFloat(r),lng:parseFloat(n)},radius:50,fillColor:k[t]}});var r=a._data.filter(function(e){var a=e.label;return t[a]});a.drawPoints(n,r)},a.handleSliderChange=function(e){var t,n=a.state,r=n.checkedType;switch(n.timeInterval){case"Hour":t=a._data.filter(function(t){return t.hour===e}).filter(function(e){var t=e.label;return r[t]})}t&&a.drawPoints(e,t)},a.clearPoints=function(e){T[e]&&T[e].forEach(function(e){e.setMap(null)})},a.drawPoints=function(e,t){a.clearPoints(a.state.currentLabel),a.setState({currentLabel:e,animated:" blink"},function(){setTimeout(function(){a.setState({animated:""})},1e3)});var n=window.drawPoints(t),r=n.type,c=n.data;switch(r){case"circle":T[e]=c}},a.handleSwitchCluster=function(e){var t=a.state,n=t.checkedType,r=t.currentLabel,c=t.useTimeLine;a.setState({cluster:e});var l=a._data.filter(function(e){var t=e.label;return n[t]}).filter(function(t){return t.cluster===parseInt(e,10)});c&&(l=l.filter(function(e){return e.hour===r})),console.log("length",l.length),a.drawPoints(r,l)},a.handleUsingTimeLine=function(e){var t=e.target.checked,n=a.state,r=n.checkedType,c=n.currentLabel,l=n.cluster;l=parseInt(l,10),a.setState({useTimeLine:t});var s=a._data.filter(function(e){var t=e.label;return r[t]}).filter(function(e){return e.cluster===l});t&&(s=s.filter(function(e){return e.hour===c})),a.drawPoints(c,s)},a.handleTypeSelect=function(e,t){var n=a.state,r=n.checkedType,c=n.currentLabel,l=n.useTimeLine,i=Object(s.a)(r);i[e]=t,a.setState({checkedType:i});var o=a._data.filter(function(e){var t=e.label;return i[t]});l&&(o=o.filter(function(e){return e.hour===c})),a.drawPoints(c,o)},a.cMap={},a.dataSource=[],a._data=[],a.state={timeInterval:"",sliderMinValue:0,sliderMaxValue:100,currentLabel:0,animated:"",useTimeLine:!1,cluster:"0",checkedType:[]},a}return Object(b.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.fetchResult().then(function(){e.init(),console.log("Loaded.")}).catch(function(e){return window.alert(e)})}},{key:"render",value:function(){var e=this,t=this.state,a=t.timeInterval,n=t.currentLabel,c=t.sliderMinValue,l=t.sliderMaxValue,s=t.checkedType,i=t.animated,o=t.cluster,u=t.useTimeLine;return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"drawer__layout"},r.a.createElement("span",{className:"title"},"Time Interval"),r.a.createElement("span",{className:"content"},"By ",a),r.a.createElement("span",{className:"title"},"Time Period"),u?r.a.createElement("span",{className:"content".concat(i)},"".concat(n,":00 - ").concat(n+1,":00")):r.a.createElement("span",{className:"content"},"00:00 - 24:00"),r.a.createElement("div",null,r.a.createElement(E.a,{checked:u,onChange:this.handleUsingTimeLine}),r.a.createElement("span",null,"Using TimeLine")),r.a.createElement("span",{className:"title"},"Cluster"),r.a.createElement("div",{className:"clusterTable"},r.a.createElement(y.RadioGroup,{onChange:this.handleSwitchCluster,value:o},new Array(j).fill(0).map(function(e,t){return r.a.createElement(y.RadioButton,{key:t,value:"".concat(t)},"Cluster ",t+1)}))),r.a.createElement("span",{className:"title"},"Crime Category"),r.a.createElement("div",{className:"colorTable"},this.cMap.mapping&&k.slice(0,6).map(function(t,a){return r.a.createElement("div",{key:t,className:"color__item"},r.a.createElement(E.a,{checked:s[a],onChange:function(t){return e.handleTypeSelect(a,t.target.checked)}}),r.a.createElement("span",{className:"color__dot",style:{backgroundColor:t}}),r.a.createElement("span",null,e.cMap.mapping[a]))}))),u&&r.a.createElement(w,{useRange:!1,onUpdate:this.handleSliderChange,min:c,max:l}))}}]),t}(n.Component);l.a.render(r.a.createElement(S,null),document.getElementById("root"))},91:function(e,t,a){e.exports=a(182)},96:function(e,t,a){}},[[91,2,1]]]);
//# sourceMappingURL=main.7f20da25.chunk.js.map